<%- include('partials/log_header') -%>

<head>
  
  <title>Memwa WATCH</title>
  <link href="node_modules/cloudinary-video-player/dist/cld-video-player.min.css" rel="stylesheet">
  <link href="https://unpkg.com/cloudinary-video-player@1.9.0/dist/cld-video-player.min.css" rel="stylesheet">
  <!-- <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script> -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
</head>
<section>
  <div class="px-4 py-5 my-5 text-center">
    <img class="d-block mx-auto mb-4" src="/imgs/logo.svg" alt="Memwa" width="120" height="120">
    <h1 class="display-5 fw-bold">Memwa WATCH</h1>
    <h5>Watch stories</h5> <p>from everywhere</p>
    <div class="col-lg-6 mx-auto">   
  </div>

  <!-- videoList -->

  <h1>Video List</h1>
  <!-- <ul>
    <% videos.forEach(video => { %>
      <li>
        <a href="/post/<%= video.id %>">
          <%= video.title %>
        </a>
      </li>
    <% }); %>
  </ul> -->
  <ul>
    <% videos.forEach(video => { %>
      <li>
        <a href="/post/<%= video.id %>">
          <h4><%= video.title %></h4>
        </a>
      </li>
      <h5><%= video.description %></h5>
    <% }); %>
  </ul>

  <h1><%= detail[3].url %></h1>
  <h1><%= detail.length%></h1>
  
  <!-- *****************Working carousel with manual slide count, will need to pull total from database and dynamically increase or decrease slide count to player ******************-->

  <div id="video-carousel" class="carousel slide" data-ride="carousel">
    <!-- Indicators -->
    <ol class="carousel-indicators">
      <% for(var i=1; i<detail.length; i++) {%>
        <%if(i < 1){ %>
      <li data-target="#video-carousel" data-slide-to="0" class="active"></li>
      <%}else {%>
      <li data-target="#video-carousel" data-slide-to="i"></li>
      <%}%>
      <% } %>
    </ol>
   
    
    <!-- Wrapper for slides -->
    <div class="carousel-inner">
      <div class="item active">
        <video src="<%= detail[0].url %>" controls></video>
      </div>
      <div class="item">
        <video src="<%= detail[1].url %>" controls></video>
      </div>
      <div class="item">
        <video src="<%= detail[2].url %>" controls></video>
      </div>
      <div class="item">
        <video src="<%= detail[3].url %>" controls></video>
      </div>
      <div class="item">
        <video src="<%= detail[4].url %>" controls></video>
      </div>
      <div class="item">
        <video src="<%= detail[5].url %>" controls></video>
      </div>
    </div>
  
    <!-- Controls -->
    <a class="left carousel-control" href="#video-carousel" role="button" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#video-carousel" role="button" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
  
  
  
  <!-- Playlist -->
      <!-- <% posts.forEach(post => { %>
        <div class="carousel-item">
          <video src="<%= post.media %>" controls></video>
        </div>

      <% }) %> -->
    <!-- <div id="video-carousel" class="carousel slide" data-ride="carousel">

      <div class="carousel-inner">
        <% posts.forEach(function(post, index) { %>
          <div class="carousel-item <% if (index === 0) { %>active<% } %>">
            <video controls>
              <source src="<%= detail.url %>" type="video/mp4">
            </video>
          </div>
        <% }); %>
      </div> -->

      
<!-- 
      <a class="carousel-control-prev" href="#video-carousel" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#video-carousel" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div> -->
    



  <!-- ************************************* -->
  <!-- previous carousel for playing media, disabled until fix video -->

  <!-- display videos list -->
  <!-- <% posts.forEach(function(post) { %>
    <%if(post.media.ext == '.mkv'){ %>

    <h3><%=post.title%> by <%=post.user.userName%> </h3> 
    <video
      id="demo-player"
      controls
      autoplay
      class="cld-video-player" width="800" height="600">
      <source src="<%=post.media%>" type="video/mp4" />
    </video>
    <%}else {%>
      <h3><%=post.title%> by <%=post.user.userName%> </h3> 
      <img src="<%= post.media%>" alt="<%= post.title%>" />
      <%}%>
  <% }); %> -->

  

<!-- Carousel wrapper -->
<!-- <div
  id="carouselVideoExample"
  class="carousel slide carousel-fade"
  data-mdb-ride="carousel"
> -->
  <!-- Indicators -->
  <!-- <div class="carousel-indicators">
    <button
      type="button"
      data-mdb-target="#carouselVideoExample"
      data-mdb-slide-to="0"
      class="active"
      aria-current="true"
      aria-label="Slide 1"
    ></button>
    <button
      type="button"
      data-mdb-target="#carouselVideoExample"
      data-mdb-slide-to="1"
      aria-label="Slide 2"
    ></button>
    <button
      type="button"
      data-mdb-target="#carouselVideoExample"
      data-mdb-slide-to="2"
      aria-label="Slide 3"
    ></button>
  </div> -->

  <!-- Inner -->
  <!-- <div class="carousel-inner"> -->
    <!-- Single item -->
    <!-- <div class="carousel-item active">
      <video class="img-fluid" autoplay loop muted> -->
        <!-- <source src="https://mdbcdn.b-cdn.net/img/video/forest.mp4" type="video/mp4" /> -->
        <!-- <source src="<%= detail[3].url %>" type="video/mp4" />
      </video>
      <div class="carousel-caption d-none d-md-block">
        <h5>First slide label</h5>
        <p>
          Nulla vitae elit libero, a pharetra augue mollis interdum.
        </p>
      </div>
    </div> -->

    <!-- Single item -->
    <!-- <div class="carousel-item">
      <video class="img-fluid" autoplay loop muted> -->
        <!-- <source src="https://mdbcdn.b-cdn.net/img/video/Tropical.mp4" type="video/mp4" /> -->
        <!-- <source src="<%= detail[3].url %>" type="video/mp4" /> 
      </video>
      <div class="carousel-caption d-none d-md-block">
        <h5>Second slide label</h5>
        <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        </p>
      </div>
    </div> -->

    <!-- Single item -->
    <!-- <div class="carousel-item">
      <video class="img-fluid" autoplay loop muted> -->
        <!-- <source src="https://mdbcdn.b-cdn.net/img/video/Agua-natural.mp4"type="video/mp4"/> -->
        <!-- <source src="<%= detail[3].url %>" type="video/mp4"/>
      </video>
      <div class="carousel-caption d-none d-md-block">
        <h5>Third slide label</h5>
        <p>
          Praesent commodo cursus magna, vel scelerisque nisl consectetur.
        </p>
      </div>
    </div>
  </div> -->
  <!-- Inner -->

  <!-- Controls -->
  <!-- <button
    class="carousel-control-prev"
    type="button"
    data-mdb-target="#carouselVideoExample"
    data-mdb-slide="prev"
  >
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button
    class="carousel-control-next"
    type="button"
    data-mdb-target="#carouselVideoExample"
    data-mdb-slide="next"
  >
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div> -->
<!-- Carousel wrapper -->
<!-- ************************************ -->

</section>


<script src="/cloudinary-core/cloudinary-core.js" type="text/javascript"></script>

<script src="https://unpkg.com/cloudinary-video-player@1.9.0/dist/cld-video-player.min.js" 
    type="text/javascript"></script>

    <script src="https://unpkg.com/cloudinary-video-player@1.9.0/dist/cld-video-player.min.js" 
    type="text/javascript"></script>
     <!-- cloudinary upload widget -->
     <!-- <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script> -->
    <!-- <script 
     src="/js/upload_widget.js" 
     type="text/javascript">
    </script> -->
    <script src="node_modules/cloudinary-video-player/dist/cld-video-player.min.js" 
    type="text/javascript"></script>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script> 
